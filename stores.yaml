# Store definitions for Deal Intelligence
# Add your store sources here to match incoming emails

stores:
  # Example: Nike
  - slug: nike
    name: Nike
    website_url: https://nike.com
    category: apparel
    sources:
      - type: gmail_from_address
        pattern: nike@email.nike.com
        priority: 100
      - type: gmail_from_domain
        pattern: nike.com
        priority: 50

  # Example: REI
  - slug: rei
    name: REI
    website_url: https://rei.com
    category: outdoor
    sources:
      - type: gmail_from_address
        pattern: rei@em.rei.com
        priority: 100
      - type: gmail_from_domain
        pattern: rei.com
        priority: 50

  # Example: Backcountry
  - slug: backcountry
    name: Backcountry
    website_url: https://backcountry.com
    category: outdoor
    sources:
      - type: gmail_from_address
        pattern: noreply@e.backcountry.com
        priority: 100
      - type: gmail_from_domain
        pattern: backcountry.com
        priority: 50

  # Example: Patagonia
  - slug: patagonia
    name: Patagonia
    website_url: https://patagonia.com
    category: apparel
    sources:
      - type: gmail_from_domain
        pattern: patagonia.com
        priority: 50

  # Example: The North Face
  - slug: northface
    name: The North Face
    website_url: https://thenorthface.com
    category: apparel
    sources:
      - type: gmail_from_domain
        pattern: thenorthface.com
        priority: 50
      - type: gmail_from_domain
        pattern: email.thenorthface.com
        priority: 60

  # COS
  - slug: cos
    name: COS
    website_url: https://cos.com
    category: apparel
    sources:
      - type: gmail_from_address
        pattern: news@us.e.cos.com
        priority: 100
      - type: gmail_from_domain
        pattern: us.e.cos.com
        priority: 50
      - type: web_url
        pattern: https://www.cos.com/en_usd/sale.html
        priority: 100
        active: false  # robots.txt disallows crawling

  # Corridor NYC
  - slug: corridor
    name: Corridor
    website_url: https://corridornyc.com
    category: apparel
    sources:
      - type: gmail_from_address
        pattern: info@corridornyc.com
        priority: 100
      - type: gmail_from_domain
        pattern: corridornyc.com
        priority: 50
      - type: web_url
        pattern: https://corridornyc.com/collections/sale
        priority: 100

  # Todd Snyder
  - slug: todd-snyder
    name: Todd Snyder
    website_url: https://www.toddsnyder.com
    category: apparel
    sources:
      - type: newsletter
        signup_url: https://www.toddsnyder.com/pages/subscribe
        priority: 100
        wait_until: domcontentloaded
        timeout_ms: 60000

  # Bonobos
  - slug: bonobos
    name: Bonobos
    website_url: https://bonobos.com
    category: apparel
    sources:
      - type: newsletter
        signup_url: https://bonobos.com/shop/email
        priority: 100
        wait_until: domcontentloaded
        timeout_ms: 60000

  # Patagonia Worn Wear
  - slug: patagonia-worn-wear
    name: Patagonia Worn Wear
    website_url: https://wornwear.patagonia.com
    category: apparel
    sources:
      - type: newsletter
        signup_url: https://wornwear.patagonia.com/pages/email-signup
        priority: 100
        wait_until: domcontentloaded
        timeout_ms: 60000

  # Resy
  - slug: resy
    name: Resy
    website_url: https://resy.com
    category: dining
    sources:
      - type: gmail_from_address
        pattern: noreply@resy.com
        priority: 100
      - type: gmail_from_domain
        pattern: resy.com
        priority: 50

  # Bankless
  - slug: bankless
    name: Bankless
    website_url: https://bankless.com
    category: crypto
    sources:
      - type: gmail_from_address
        pattern: team@bankless.com
        priority: 100
      - type: gmail_from_domain
        pattern: bankless.com
        priority: 50

  # DealNews (Clothing RSS)
  - slug: dealnews-clothing
    name: DealNews
    website_url: https://www.dealnews.com
    category: apparel
    sources:
      - type: rss
        url: https://www.dealnews.com/?rss=1&sort=time
        priority: 100

  # Slickdeals Apparel RSS
  - slug: slickdeals-apparel
    name: Slickdeals Apparel
    website_url: https://slickdeals.net
    category: apparel
    sources:
      - type: rss
        url: https://slickdeals.net/newsearch.php?mode=frontpage&searcharea=deals&searchin=first&rss=1&forumchoice%5B%5D=9
        priority: 100

  # The Flight Deal RSS
  - slug: the-flight-deal
    name: The Flight Deal
    website_url: https://www.theflightdeal.com
    category: travel
    sources:
      - type: rss
        url: https://www.theflightdeal.com/feed/
        priority: 100

  # Secret Flying
  - slug: secret-flying
    name: Secret Flying
    website_url: https://secretflying.com
    category: travel
    sources:
      - type: web_url
        pattern: https://secretflying.com/feed/
        priority: 100
        active: false  # robots.txt disallows crawling

  # United Airlines
  - slug: united
    name: United Airlines
    website_url: https://www.united.com
    category: travel
    sources:
      - type: web_url
        pattern: https://www.united.com/en/us/deals
        priority: 100
        active: false  # frequent timeouts / blocks
      - type: browser
        url: https://www.united.com/en/us/deals
        priority: 100
        wait_until: domcontentloaded
        timeout_ms: 60000

  # Delta Air Lines
  - slug: delta
    name: Delta Air Lines
    website_url: https://www.delta.com
    category: travel
    sources:
      - type: web_url
        pattern: https://www.delta.com/us/en/deals-and-offers
        priority: 100
        active: false  # blocked by WAF (HTTP 444)
      - type: browser
        url: https://www.delta.com/us/en/deals-and-offers
        priority: 100
        wait_until: domcontentloaded
        timeout_ms: 60000

# Add more stores as needed by following this pattern:
# - slug: unique-identifier (lowercase, hyphens)
#   name: Display Name
#   website_url: https://example.com
#   category: category-name
#   sources:
#     - type: gmail_from_address  # Exact email match (higher priority)
#       pattern: email@domain.com
#       priority: 100
#     - type: gmail_from_domain   # Domain match (fallback)
#       pattern: domain.com
#       priority: 50
